{
  "version": 3,
  "file": "main.css",
  "sources": [
    "../../Add-Edit-User.svelte",
    "../../App.svelte",
    "../../Footer.svelte",
    "../../Home.svelte",
    "../../Lista.svelte"
  ],
  "sourcesContent": [
    "<script>\n  let User = {};\n  let Municipios;\n\n  if (localStorage && localStorage.Email) User.Email = localStorage.Email;\n\n  function actualizaDatos(id) {\n    dbUsers\n      .doc(id)\n      .get()\n      .then((doc) => {\n        if (doc.exists) {\n          User = doc.data();\n          User.Actualización = new Date();\n        }\n      });\n  }\n\n  if (User.Email) {\n    // const email = auth.currentUser.email;\n    const email = User.Email;\n    dbUsers\n      .doc(email)\n      .get()\n      .then((doc) => {\n        if (doc.exists) {\n          User = doc.data();\n          User.Actualización = new Date();\n        } else {\n          console.log(\n            `El ususario ${LoginUser.displayName} no existe en la base de datos y se creará`\n          );\n          const newUser = {\n            id: LoginUser.uid,\n            Email: LoginUser.email,\n            Actualización: new Date(),\n            Nombre: LoginUser.displayName.split(\" \").slice(0, -1).join(\" \"),\n            Apellido: LoginUser.displayName.split(\" \").slice(-1).join(\" \"),\n            Avatar: LoginUser.providerData[0].photoURL,\n            \"Nombre Completo\": LoginUser.displayName,\n          };\n          if (LoginUser.phoneNumber) newUser.Teléfono = LoginUser.phoneNumber;\n          dbUsers.doc(email).set(newUser);\n          User = newUser;\n        }\n        document.forms[0][\"Email\"].disabled = true;\n      });\n  }\n\n  /* Auto Guardado de Datos en Firestore */\n  function guardarDatos() {\n    const form = document.forms[0];\n    if (!form.checkValidity()) return false;\n    const email = form[\"Email\"].value;\n    console.info(\"Guadando datos...\");\n    User[\"Actualización\"] = new Date();\n    dbUsers.doc(email).set(User);\n  }\n\n  async function chequearEmailValido() {\n    const input = document.forms[0][\"Email\"];\n    input.setCustomValidity(\"\");\n    const valido = input.validity.valid;\n\n    if (!valido) return false;\n    const email = input.value;\n\n    // Guardo en Local\n    if (localStorage) localStorage.Email = email;\n\n    /* Chequea si existe el email */\n    const esValido = await dbUsers\n      .where(\"Email\", \"==\", email)\n      .get()\n      .then((doc) => {\n        if (!doc.empty) {\n          // el email ya existe\n          actualizaDatos(email);\n          input.disabled = true;\n\n          // const error = `${email} ya se existe !`;\n          // console.error(error);\n          // input.setCustomValidity(error);\n          // input.placeholder = error;\n          // input.value = \"\";\n          // input.focus();\n        }\n      });\n    return esValido;\n  }\n\n  async function cargaMunicipios(provincia) {\n    Municipios = await obtenerMunicipios(provincia);\n    console.log(Municipios);\n  }\n\n  async function obtenerMunicipios(provincia = \"\") {\n    if (provincia) provincia = `&provincia=${provincia}`;\n    const url = `https://apis.datos.gob.ar/georef/api/municipios?max=5000${provincia}`;\n    const fetchData = await fetch(url);\n    const data = await fetchData.json();\n    const reduce = data.municipios.reduce((accu, item) => {\n      const municipio = item.nombre;\n      const provincia = item.provincia.nombre;\n      const geoloc = item.centroide;\n      return [...accu, municipio];\n    }, \"\");\n    const results = [...new Set(reduce)];\n    return results;\n  }\n\n  /*\n  function uploadImagen() {\n    const file = document.getElementById(\"imageFile\").files[0];\n\n    if (file) {\n      const imagen = document.getElementById(\"avatar\");\n      imagen.src = URL.createObjectURL(file);\n    }\n  }\n  */\n</script>\n\n<style>\n  button {\n    text-align: center;\n  }\n</style>\n\n<section>\n  <h1 class=\"title\">Mis Datos</h1>\n\n  <form on:change={guardarDatos} action=\"javascript:void(0);\">\n    <fieldset>\n      <caption>Datos Personales</caption>\n\n      <label for=\"Email\">Email</label>\n      <input\n        on:change={chequearEmailValido}\n        bind:value={User.Email}\n        name=\"Email\"\n        type=\"email\"\n        required />\n\n      <label for=\"Nombre\">Nombre</label>\n      <input bind:value={User.Nombre} name=\"Nombre\" type=\"text\" required />\n\n      <label for=\"Apellido\">Apeliido</label>\n      <input bind:value={User.Apellido} name=\"Apellido\" type=\"text\" required />\n\n      <label for=\"Teléfono\">Teléfono</label>\n      <input bind:value={User.Teléfono} name=\"Teléfono\" type=\"tel\" />\n\n      <label for=\"Comercial Comercial\">Nombre comercial</label>\n      <input\n        bind:value={User['Nombre Comercial']}\n        name=\"Comercial Comercial\"\n        type=\"text\"\n        placeholder=\"Opcional\" />\n\n      <label for=\"Estudio\">Nombre de su estudio:</label>\n      <input\n        bind:value={User.Estudio}\n        name=\"Estudio\"\n        type=\"text\"\n        placeholder=\"Opcional\" />\n\n      <label for=\"País\">País</label>\n      <select bind:value={User['País']} name=\"País\" required>\n        <option value=\"Argentina\">Argentina</option>\n      </select>\n      <label for=\"Provincia\">Provincia</label>\n      <select\n        on:input={(e) => cargaMunicipios(e.target.value)}\n        bind:value={User.Provincia}\n        name=\"Provincia\"\n        required>\n        <option value=\"Buenos Aires\">Bs. As.</option>\n        <option value=\"Catamarca\">Catamarca</option>\n        <option value=\"Chaco\">Chaco</option>\n        <option value=\"Chubut\">Chubut</option>\n        <option value=\"Córdoba\">Córdoba</option>\n        <option value=\"Corrientes\">Corrientes</option>\n        <option value=\"Entre Ríos\">Entre Ríos</option>\n        <option value=\"Formosa\">Formosa</option>\n        <option value=\"Jujuy\">Jujuy</option>\n        <option value=\"La Pampa\">La Pampa</option>\n        <option value=\"La Rioja\">La Rioja</option>\n        <option value=\"Mendoza\">Mendoza</option>\n        <option value=\"Misiones\">Misiones</option>\n        <option value=\"Neuquen\">Neuquen</option>\n        <option value=\"Río Negro\">Río Negro</option>\n        <option value=\"Salta\">Salta</option>\n        <option value=\"San Juan\">San Juan</option>\n        <option value=\"San Luis\">San Luis</option>\n        <option value=\"Santa Cruz\">Santa Cruz</option>\n        <option value=\"Santa Fe\">Santa Fe</option>\n        <option value=\"Sgo. del Estero\">Sgo. del Estero</option>\n        <option value=\"Tierra del Fuego\">Tierra del Fuego</option>\n        <option value=\"Tucumán\">Tucumán</option>\n      </select>\n\n      <label for=\"Ciudad\">Ciudad</label>\n      <input\n        bind:value={User.Ciudad}\n        name=\"Ciudad\"\n        type=\"text\"\n        list=\"Municipios\" />\n      {#if Municipios}\n        <datalist id=\"Municipios\">\n          {#each Municipios as item}\n            <option value={item} />\n          {/each}\n        </datalist>\n      {/if}\n    </fieldset>\n    <hr class=\"Sep\" />\n    <hr class=\"Sep\" />\n    <fieldset>\n\n      <caption>Redes sociales</caption>\n      <label for=\"Website\">Sitio Web</label>\n      <input\n        bind:value={User.Website}\n        name=\"Website\"\n        type=\"text\"\n        placeholder=\"Opcional\" />\n\n      <label for=\"Facebook\">Facebook</label>\n      <input\n        bind:value={User.Facebook}\n        name=\"Facebook\"\n        type=\"text\"\n        placeholder=\"Opcional\" />\n\n      <label for=\"Instagram\">Instagram</label>\n      <input\n        bind:value={User.Instagram}\n        name=\"Instagram\"\n        type=\"text\"\n        placeholder=\"Opcional\" />\n\n      <label for=\"Twitter\">Twitter</label>\n      <input\n        bind:value={User.Twitter}\n        name=\"Twitter\"\n        type=\"text\"\n        placeholder=\"Opcional\" />\n\n      <label for=\"Información Adicional\">Información Adicional</label>\n      <textarea\n        bind:value={User['Información Adicional']}\n        name=\"Información Adicional\"\n        cols=\"30\"\n        rows=\"10\"\n        placeholder=\"Opcional\" />\n    </fieldset>\n    <button on:click={guardarDatos} class=\"Inv\" id=\"Guardar\">\n      Guardar Datos\n    </button>\n    <!-- svelte-ignore missing-declaration -->\n    <button on:click={() => deleteUserById(User.Email)} class=\"Out\">\n      BORRAR MIS DATOS\n    </button>\n\n  </form>\n\n</section>\n",
    "<script>\n  import { loginUser, displayPage } from \"../store.js\";\n  import Footer from \"./Footer.svelte\";\n  import Home from \"./Home.svelte\";\n  import EditUser from \"./Add-Edit-User.svelte\";\n\n  // Auth\n  auth.onAuthStateChanged((user) => {\n    $loginUser = user;\n  });\n</script>\n\n<style>\n  .menu {\n    border-radius: 5px;\n  }\n  ul {\n    list-style: none;\n    display: flex;\n    justify-content: space-around;\n    margin: 0;\n  }\n  ul li {\n    color: var(--text);\n    cursor: pointer;\n    color: inherit;\n  }\n  ul li:hover {\n    color: var(--text);\n  }\n</style>\n\n<main>\n  <div class=\"menu Inv\">\n    <ul on:click={(e) => ($displayPage = e.target.dataset.page)} class=\"navbar\">\n      <li data-page=\"Home\">Home</li>\n      <li data-page=\"Mis Datos\">Mis Datos</li>\n      {#if $loginUser}\n        <!-- <li data-page=\"Mis Datos\">Mis Datos</li> -->\n      {:else}\n        <!-- <li on:click={logIn}>Ingresar</li> -->\n      {/if}\n\n    </ul>\n  </div>\n  <section class=\"pages\">\n    {#if $displayPage == 'Home' || !$displayPage}\n      <Home />\n    {:else if $displayPage == 'Mis Datos'}\n      <EditUser />\n    {/if}\n  </section>\n  <Footer />\n</main>\n",
    "<script>\n  import { loginUser } from \"../store.js\";\n</script>\n\n<style>\n  section {\n    text-align: center;\n    font-size: 14px;\n  }\n</style>\n\n<section>\n  <!-- svelte-ignore missing-declaration -->\n  {#if $loginUser}\n    <button on:click={cerrarSesion} class=\"Out\">\n      {$loginUser.displayName} - Cerrar Sesión\n    </button>\n  {:else}\n    <button on:click={iniciarSesion} class=\"Out\">Iniciar Sesión</button>\n  {/if}\n</section>\n",
    "<script>\n  import { loginUser, displayPage } from \"../store.js\";\n  import Lista from \"./Lista.svelte\";\n</script>\n\n<style>\n  .head h1 {\n    font-size: 1.5em;\n  }\n  .head p {\n    text-align: center;\n  }\n</style>\n\n<section>\n  <div class=\"head\">\n\n    <h1>Fotógrafos Argentinos</h1>\n    <p>¡Podes buscar en tu ciudad o alrededores!</p>\n    {#if !$loginUser}\n      <p>\n        <button class=\"\" on:click={() => ($displayPage = 'Mis Datos')}>\n          Ingresá tus Datos\n        </button>\n        <!-- Si sos fotógrafo te invitamos a -->\n        <!-- svelte-ignore missing-declaration -->\n        <!-- <a href=\"#top\" on:click|preventDefault={logIn}>ingresá tus datos.</a> -->\n      </p>\n    {/if}\n\n  </div>\n  <Lista />\n</section>\n",
    "<script>\n  import { each } from \"svelte/internal\";\n\n  let Fotografos = [];\n  let Contador = \"\";\n  let Dataset = [];\n\n  /* Actualización automática de la lista */\n  dbUsers.onSnapshot((docs) => {\n    Fotografos = [];\n    docs.forEach((doc) => {\n      if (doc.data().Ciudad) Dataset.push(doc.data().Ciudad.capitalize());\n      if (doc.data().Provincia) Dataset.push(doc.data().Provincia.capitalize());\n      Fotografos = [\n        ...Fotografos,\n        {\n          Nombre:\n            doc.data()[\"Nombre Comercial\"] ||\n            `${doc.data().Nombre} ${doc.data().Apellido}`,\n          Email: doc.id,\n          Tel: doc.data()[\"Teléfono\"] || \"\",\n          Ciudad: doc.data().Ciudad || doc.data().Provincia || \"\",\n          Provincia: doc.data().Provincia || doc.data().Provincia || \"\",\n          País: doc.data().País,\n        },\n      ];\n    });\n    Contador = Fotografos.length;\n    Fotografos = [...Fotografos].sort(() => 0.5 - Math.random());\n    Dataset = [...new Set(Dataset)];\n  });\n\n  function filtrarTabla() {\n    const input = document.getElementById(\"buscar\");\n    const tabla = document.getElementById(\"fotografos\");\n    const filas = tabla.tBodies[0].childNodes;\n\n    function filtrar() {\n      const query = new RegExp(input.value, \"ig\");\n      Contador = 0;\n      [...filas].map((fila) => {\n        // texto a buscar\n        const str = `${fila.dataset.nombre} ${fila.dataset.ciudad} ${fila.dataset.provincia} ${fila.dataset.pais} ${fila.dataset.email} ${fila.dataset.tel}`;\n        Contador++;\n        if (query.test(str)) {\n          fila.style.display = \"table-row\";\n        } else {\n          fila.style.display = \"none\";\n          Contador--;\n        }\n      });\n    }\n\n    input.addEventListener(\"input\", filtrar);\n    input.focus();\n  }\n\n  document.addEventListener(\"readystatechange\", () => {\n    if (document.readyState === \"complete\") filtrarTabla();\n  });\n\n  function mostrarInfo(fila) {\n    const el = fila.target.parentElement;\n    const data = el.dataset;\n    const modal = document.querySelector(\".modal\");\n\n    modal.style.display = \"block\";\n    modal.childNodes[0].innerText = data.nombre; // Nombre\n\n    modal.childNodes[2].href = `tel:+${data.tel}`; // Teléfono\n    modal.childNodes[2].innerText = data.tel ? `Tel: ${data.tel}` : \"\"; // Teléfono\n\n    modal.childNodes[4].href = `mailto:${data.email}`; // Email\n    modal.childNodes[4].innerText = data.email; // Email\n    modal.childNodes[6].innerText = `${data.ciudad}, ${data.provincia}`; // Ciudad y Provincia\n  }\n  function cerrarModal() {\n    const modal = document.querySelector(\".modal\");\n    modal.style.display = \"none\";\n  }\n\n  // Capitalize the first letter of each word of a given string\n  // Usage: 'capItalezE aLl fIrSt leTTers'.capitalize()\n  String.prototype.capitalize = function () {\n    if (!this || !typeof this === \"string\") return this;\n    return this.trim()\n      .split(\" \")\n      .reduce(\n        (text, word) => text + \" \" + word[0].toUpperCase() + word.substr(1),\n        \"\"\n      );\n  };\n\n  /* Actualización por única vez \n  dbUsers.get().then((docs) => {\n    docs.forEach((doc) => {\n      Fotografos = [\n        ...Fotografos,\n        {\n          Nombre:\n            doc.data()[\"Nombre Comercial\"] ||\n            `${doc.data().Nombre} ${doc.data().Apellido}`,\n          Email: doc.id,\n          Tel: doc.data()[\"Teléfono\"] || \"\",\n          Ciudad: doc.data().Ciudad || doc.data().Provincia || \"\",\n          Provincia: doc.data().Provincia || doc.data().Provincia || \"\",\n          País: doc.data().País,\n        },\n      ];\n    });\n  });\n*/\n</script>\n\n<style>\n  input {\n    width: 100%;\n  }\n\n  th {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    padding: 10px;\n    font-size: 0.95rem;\n  }\n  .modal {\n    display: none;\n    text-align: center;\n    position: fixed;\n    min-width: 300px;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    padding: 1rem;\n    border-radius: 5px;\n    box-shadow: 0 0 2px 0;\n  }\n  .modal > * {\n    display: block;\n  }\n  .modal > a:hover {\n    color: var(--text);\n  }\n  .modal h1 {\n    font-size: 1.2rem;\n  }\n  .modal button {\n    margin: auto;\n    line-height: inherit;\n    border-color: white;\n  }\n</style>\n\n<section>\n  <input\n    id=\"buscar\"\n    type=\"search\"\n    list=\"datalist\"\n    placeholder=\"Buscá fotógrafos de tu ciudad\" />\n  <datalist id=\"datalist\">\n    {#each Dataset as item}\n      <option value={item} />\n    {/each}\n  </datalist>\n  <hr class=\"Sep\" />\n  <table id=\"fotografos\">\n    <thead>\n      <tr>\n        <th>\n          Nombre\n          {#if !!Contador}({Contador}){/if}\n        </th>\n        <th>Ciudad</th>\n      </tr>\n    </thead>\n\n    <tbody>\n      {#each Fotografos as { Email, Nombre, Ciudad, Tel, Provincia, País }}\n        <tr\n          on:click={mostrarInfo}\n          data-nombre={Nombre}\n          data-email={Email}\n          data-tel={Tel}\n          data-ciudad={Ciudad}\n          data-provincia={Provincia}\n          data-pais={País}\n          title=\"{Email} | {Tel}\">\n          <th>{Nombre}</th>\n          <!-- <th>{Nombre}</th> -->\n          <th>{Ciudad}</th>\n        </tr>\n      {/each}\n    </tbody>\n  </table>\n  <div class=\"modal Inv \">\n    <h1>Germán Aliprandi</h1>\n    <a href>.</a>\n    <a href>.</a>\n    <span>.</span>\n    <hr class=\"Sep\" />\n    <button class=\"Sol Inv\" on:click={cerrarModal}>CERRAR</button>\n  </div>\n</section>\n"
  ],
  "names": [],
  "mappings": "AA4HE,MAAM,cAAC,CAAC,AACN,UAAU,CAAE,MAAM,AACpB,CAAC;ACjHD,KAAK,4BAAC,CAAC,AACL,aAAa,CAAE,GAAG,AACpB,CAAC,AACD,EAAE,4BAAC,CAAC,AACF,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,YAAY,CAC7B,MAAM,CAAE,CAAC,AACX,CAAC,AACD,gBAAE,CAAC,EAAE,cAAC,CAAC,AACL,KAAK,CAAE,IAAI,MAAM,CAAC,CAClB,MAAM,CAAE,OAAO,CACf,KAAK,CAAE,OAAO,AAChB,CAAC,AACD,gBAAE,CAAC,gBAAE,MAAM,AAAC,CAAC,AACX,KAAK,CAAE,IAAI,MAAM,CAAC,AACpB,CAAC;ACxBD,OAAO,cAAC,CAAC,AACP,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,IAAI,AACjB,CAAC;ACFD,mBAAK,CAAC,EAAE,cAAC,CAAC,AACR,SAAS,CAAE,KAAK,AAClB,CAAC,AACD,mBAAK,CAAC,CAAC,cAAC,CAAC,AACP,UAAU,CAAE,MAAM,AACpB,CAAC;ACwGD,KAAK,8BAAC,CAAC,AACL,KAAK,CAAE,IAAI,AACb,CAAC,AAED,EAAE,8BAAC,CAAC,AACF,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,OAAO,AACpB,CAAC,AACD,MAAM,8BAAC,CAAC,AACN,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,MAAM,CAClB,QAAQ,CAAE,KAAK,CACf,SAAS,CAAE,KAAK,CAChB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,GAAG,CACT,SAAS,CAAE,UAAU,IAAI,CAAC,CAAC,IAAI,CAAC,CAChC,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,AACvB,CAAC,AACD,qBAAM,CAAG,eAAE,CAAC,AACV,OAAO,CAAE,KAAK,AAChB,CAAC,AACD,qBAAM,CAAG,gBAAC,MAAM,AAAC,CAAC,AAChB,KAAK,CAAE,IAAI,MAAM,CAAC,AACpB,CAAC,AACD,qBAAM,CAAC,EAAE,eAAC,CAAC,AACT,SAAS,CAAE,MAAM,AACnB,CAAC,AACD,qBAAM,CAAC,MAAM,eAAC,CAAC,AACb,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,OAAO,CACpB,YAAY,CAAE,KAAK,AACrB,CAAC"
}